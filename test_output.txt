
 RUN  v3.2.4 /Users/dennis/Documents/Projects/2025/MasteryMap/MasteryMap

stdout | tests/api/admin-school-restrictions.test.ts > Admin School Restrictions API > Admin A should only see users from School A
Debug: School A ID: [33m17[39m
Debug: Admin A ID: [33m511[39m
Debug: Student A ID: [33m512[39m
Debug: Response Users: [
  {
    "id": 446,
    "username": "student_school_a",
    "role": "student",
    "schoolId": 9
  }
]

 â¯ tests/api/admin-school-restrictions.test.ts (3 tests | 1 failed) 3004ms
   Ã— Admin School Restrictions API > Admin A should only see users from School A 292ms
     â†’ expected [ 446 ] to include 512
   âœ“ Admin School Restrictions API > Admin A should NOT be able to delete user from School B 284ms
   âœ“ Admin School Restrictions API > Analytics dashboard should only show School A stats (FIX VERIFICATION)  1232ms

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Tests 1 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  tests/api/admin-school-restrictions.test.ts > Admin School Restrictions API > Admin A should only see users from School A
AssertionError: expected [ 446 ] to include 512
 â¯ tests/api/admin-school-restrictions.test.ts:106:25
    104|         console.log('Debug: Response Users:', JSON.stringify(users, nuâ€¦
    105| 
    106|         expect(userIds).toContain(studentSchoolA.id);
       |                         ^
    107|         expect(userIds).not.toContain(studentSchoolB.id);
    108|         expect(userIds).not.toContain(freeUser.id);

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯


 Test Files  1 failed (1)
      Tests  1 failed | 2 passed (3)
   Start at  16:29:35
   Duration  4.01s (transform 242ms, setup 19ms, collect 584ms, tests 3.00s, environment 0ms, prepare 40ms)

npm notice
npm notice New major version of npm available! 10.8.2 -> 11.10.0
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.10.0
npm notice To update run: npm install -g npm@11.10.0
npm notice
