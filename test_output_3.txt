
 RUN  v3.2.4 /Users/dennis/Documents/Projects/2025/MasteryMap/MasteryMap

stdout | tests/reproduce_issue.test.ts
9:44:27 PM [express] Testing database connection...

stdout | tests/reproduce_issue.test.ts > Assessment Update Reproduction
Database connection successful

stdout | tests/reproduce_issue.test.ts > Assessment Update Reproduction
Setting up learner-outcomes-hierarchy routes

stdout | tests/reproduce_issue.test.ts > Assessment Update Reproduction
9:44:27 PM [express] serving on port 8080

stdout | tests/reproduce_issue.test.ts > Assessment Update Reproduction
RequireAuth: No access token found for /user

stdout | tests/reproduce_issue.test.ts > Assessment Update Reproduction
9:44:28 PM [express] GET /api/auth/user 401 in 2ms :: {"message":"Unauthorized"}

stdout | tests/reproduce_issue.test.ts > Assessment Update Reproduction
9:44:28 PM [express] POST /api/auth/register 201 in 645ms :: {"id":42,"username":"update-test-teacheâ€¦

stderr | tests/reproduce_issue.test.ts > Assessment Update Reproduction
Registration failed: {
  id: [33m42[39m,
  username: [32m'update-test-teacher-1770518667699'[39m,
  profileImageUrl: [1mnull[22m,
  role: [32m'teacher'[39m,
  schoolId: [33m1[39m,
  tier: [32m'enterprise'[39m,
  projectGenerationCount: [33m0[39m,
  lastProjectGenerationDate: [1mnull[22m,
  createdAt: [32m'2026-02-08T02:44:28.211Z'[39m,
  updatedAt: [32m'2026-02-08T02:44:28.211Z'[39m
}

stdout | tests/reproduce_issue.test.ts > Assessment Update Reproduction > should create an assessment and fail to update due date
RequireAuth: No access token found for /
9:44:28 PM [express] POST /api/assessments 401 in 1ms :: {"message":"Unauthorized"}

 â¯ tests/reproduce_issue.test.ts (1 test | 1 failed) 1047ms
   Ã— Assessment Update Reproduction > should create an assessment and fail to update due date 7ms
     â†’ expected 401 to be 200 // Object.is equality

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  tests/reproduce_issue.test.ts > Assessment Update Reproduction > should create an assessment and fail to update due date
AssertionError: expected 401 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 401[39m

 â¯ tests/reproduce_issue.test.ts:56:39
     54|             });
     55| 
     56|         expect(createResponse.status).toBe(200);
       |                                       ^
     57|         assessmentId = createResponse.body.id;
     58| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed (1)
   Start at  21:44:26
   Duration  1.98s (transform 217ms, setup 11ms, collect 564ms, tests 1.05s, environment 0ms, prepare 36ms)

